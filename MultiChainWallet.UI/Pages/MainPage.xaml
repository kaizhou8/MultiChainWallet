<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MultiChainWallet.UI.Pages.MainPage"
             BackgroundColor="{StaticResource Background}">

    <Grid RowDefinitions="Auto,*">
        <!-- Header -->
        <Grid Grid.Row="0" 
              Padding="20"
              ColumnDefinitions="*,Auto"
              BackgroundColor="{StaticResource Surface}">
            <VerticalStackLayout Grid.Column="0" Spacing="4">
                <Label Text="总资产 / Total Assets"
                       Style="{StaticResource SectionTitle}"
                       TextColor="{StaticResource TextSecondary}"/>
                <Label x:Name="TotalBalanceLabel"
                       Text="$25,420.65"
                       FontSize="32"
                       FontFamily="OpenSansBold"
                       TextColor="{StaticResource TextPrimary}"/>
            </VerticalStackLayout>
            <Button Grid.Column="1"
                    Style="{StaticResource OutlineButton}"
                    Text="刷新 / Refresh"
                    Margin="0,0,0,0"/>
        </Grid>

        <!-- Main Content -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20" Padding="20">
                <!-- Quick Actions -->
                <Frame Style="{StaticResource CardView}">
                    <Grid ColumnDefinitions="*,*,*" RowDefinitions="Auto,*" ColumnSpacing="16">
                        <Label Text="快速操作 / Quick Actions"
                               Grid.ColumnSpan="3"
                               Style="{StaticResource SectionTitle}"
                               Margin="0,0,0,16"/>
                        
                        <!-- Send -->
                        <Button Grid.Row="1" Grid.Column="0"
                                Style="{StaticResource BaseButton}"
                                BackgroundColor="{StaticResource Primary}"
                                Text="发送 / Send"/>
                        
                        <!-- Receive -->
                        <Button Grid.Row="1" Grid.Column="1"
                                Style="{StaticResource BaseButton}"
                                BackgroundColor="{StaticResource Secondary}"
                                Text="接收 / Receive"/>
                        
                        <!-- Swap -->
                        <Button Grid.Row="1" Grid.Column="2"
                                Style="{StaticResource BaseButton}"
                                BackgroundColor="{StaticResource Tertiary}"
                                Text="兑换 / Swap"/>
                    </Grid>
                </Frame>

                <!-- Wallet List -->
                <Frame Style="{StaticResource CardView}">
                    <VerticalStackLayout Spacing="16">
                        <Label Text="我的钱包 / My Wallets"
                               Style="{StaticResource SectionTitle}"/>
                        
                        <CollectionView x:Name="WalletList"
                                      ItemsSource="{Binding Wallets}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Padding="0,8" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                                        <Image Grid.Column="0"
                                               Source="{Binding IconSource}"
                                               WidthRequest="40"
                                               HeightRequest="40"/>
                                        
                                        <VerticalStackLayout Grid.Column="1" Spacing="4">
                                            <Label Text="{Binding Name}"
                                                   FontFamily="OpenSansSemiBold"
                                                   TextColor="{StaticResource TextPrimary}"/>
                                            <Label Text="{Binding Address}"
                                                   FontSize="12"
                                                   TextColor="{StaticResource TextTertiary}"/>
                                        </VerticalStackLayout>
                                        
                                        <VerticalStackLayout Grid.Column="2" 
                                                           HorizontalOptions="End">
                                            <Label Text="{Binding Balance}"
                                                   FontFamily="OpenSansSemiBold"
                                                   TextColor="{StaticResource TextPrimary}"/>
                                            <Label Text="{Binding FiatBalance}"
                                                   FontSize="12"
                                                   TextColor="{StaticResource TextSecondary}"/>
                                        </VerticalStackLayout>
                                    </Grid>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                        
                        <Button Text="添加钱包 / Add Wallet"
                                Style="{StaticResource OutlineButton}"
                                HorizontalOptions="Fill"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Recent Transactions -->
                <Frame Style="{StaticResource CardView}">
                    <VerticalStackLayout Spacing="16">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Text="最近交易 / Recent Transactions"
                                   Style="{StaticResource SectionTitle}"/>
                            <Button Grid.Column="1"
                                    Text="查看全部 / View All"
                                    Style="{StaticResource OutlineButton}"/>
                        </Grid>
                        
                        <CollectionView x:Name="TransactionList"
                                      ItemsSource="{Binding Transactions}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Padding="0,8" 
                                          ColumnDefinitions="Auto,*,Auto" 
                                          ColumnSpacing="16">
                                        <Frame Grid.Column="0"
                                               CornerRadius="20"
                                               HeightRequest="40"
                                               WidthRequest="40"
                                               Padding="0"
                                               BackgroundColor="{Binding TypeColor}">
                                            <Image Source="{Binding TypeIcon}"
                                                   Margin="8"/>
                                        </Frame>
                                        
                                        <VerticalStackLayout Grid.Column="1" 
                                                           Spacing="4">
                                            <Label Text="{Binding Type}"
                                                   FontFamily="OpenSansSemiBold"
                                                   TextColor="{StaticResource TextPrimary}"/>
                                            <Label Text="{Binding Date}"
                                                   FontSize="12"
                                                   TextColor="{StaticResource TextTertiary}"/>
                                        </VerticalStackLayout>
                                        
                                        <VerticalStackLayout Grid.Column="2"
                                                           HorizontalOptions="End">
                                            <Label Text="{Binding Amount}"
                                                   FontFamily="OpenSansSemiBold"
                                                   TextColor="{Binding AmountColor}"/>
                                            <Label Text="{Binding FiatAmount}"
                                                   FontSize="12"
                                                   TextColor="{StaticResource TextSecondary}"/>
                                        </VerticalStackLayout>
                                    </Grid>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </VerticalStackLayout>
                </Frame>

                <!-- Hardware Wallet Features -->
                <Frame Style="{StaticResource CardView}">
                    <VerticalStackLayout Spacing="16">
                        <Label Text="硬件钱包 / Hardware Wallets"
                               Style="{StaticResource SectionTitle}"/>
                        
                        <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="16" RowSpacing="16">
                            <!-- Connect Hardware Wallet -->
                            <Button Grid.Row="0" Grid.Column="0"
                                    Style="{StaticResource BaseButton}"
                                    BackgroundColor="{StaticResource Primary}"
                                    Text="连接硬件钱包 / Connect Hardware Wallet"
                                    Clicked="OnConnectHardwareWalletClicked"/>
                            
                            <!-- Hardware Wallet Transaction -->
                            <Button Grid.Row="0" Grid.Column="1"
                                    Style="{StaticResource BaseButton}"
                                    BackgroundColor="{StaticResource Secondary}"
                                    Text="硬件钱包交易 / Hardware Wallet Transaction"
                                    Clicked="OnHardwareWalletTransactionClicked"/>
                            
                            <!-- Hardware Wallet Address -->
                            <Button Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                    Style="{StaticResource BaseButton}"
                                    BackgroundColor="{StaticResource Tertiary}"
                                    Text="硬件钱包地址管理 / Hardware Wallet Address Management"
                                    Clicked="OnHardwareWalletAddressClicked"/>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
